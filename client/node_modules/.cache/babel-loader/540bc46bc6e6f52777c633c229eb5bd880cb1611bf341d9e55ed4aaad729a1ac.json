{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useSearchParams,useNavigate}from'react-router-dom';import{serviceProvidersAPI,ordersAPI}from'../services/api';import LoadingSpinner from'../components/LoadingSpinner';import{ComputerDesktopIcon,SpeakerWaveIcon,UserGroupIcon,BuildingStorefrontIcon,TruckIcon,CheckCircleIcon,XCircleIcon,ClockIcon,PlusIcon,ArrowLeftIcon}from'@heroicons/react/24/outline';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const OrderBooking=()=>{const{providerId}=useParams();const[searchParams]=useSearchParams();const navigate=useNavigate();const[provider,setProvider]=useState(null);const[availableInventory,setAvailableInventory]=useState({pos:[],soundbox:[]});const[distributors,setDistributors]=useState([]);const[retailers,setRetailers]=useState([]);const[loading,setLoading]=useState(true);const[submitting,setSubmitting]=useState(false);// Form state\nconst[selectedDistributor,setSelectedDistributor]=useState('');const[selectedRetailer,setSelectedRetailer]=useState('');const[selectedMachines,setSelectedMachines]=useState([]);const[orderNotes,setOrderNotes]=useState('');const[deliveryAddress,setDeliveryAddress]=useState('');const[expectedDeliveryDate,setExpectedDeliveryDate]=useState('');// Pre-selected machine from URL params\nconst preSelectedMachine=searchParams.get('machine');const preSelectedType=searchParams.get('type');useEffect(()=>{fetchData();},[providerId]);useEffect(()=>{if(preSelectedMachine&&preSelectedType&&availableInventory){const inventory=preSelectedType==='pos'?availableInventory.pos:availableInventory.soundbox;const machine=inventory.find(m=>m.id===preSelectedMachine);if(machine){setSelectedMachines([machine]);}}},[preSelectedMachine,preSelectedType,availableInventory]);const fetchData=async()=>{try{setLoading(true);const[providerData,inventoryData,distributorsData]=await Promise.all([serviceProvidersAPI.getById(providerId),serviceProvidersAPI.getAvailableInventory(providerId),ordersAPI.getDistributors()]);setProvider(providerData);setAvailableInventory(inventoryData.inventory);setDistributors(distributorsData);}catch(error){console.error('Error fetching data:',error);toast.error('Failed to load order data');}finally{setLoading(false);}};const fetchRetailers=async distributorId=>{try{const retailersData=await ordersAPI.getRetailers({distributorId});setRetailers(retailersData);}catch(error){console.error('Error fetching retailers:',error);toast.error('Failed to load retailers');}};const handleDistributorChange=distributorId=>{setSelectedDistributor(distributorId);setSelectedRetailer('');setRetailers([]);if(distributorId){fetchRetailers(distributorId);}};const handleMachineSelection=(machine,type)=>{const isSelected=selectedMachines.some(m=>m.id===machine.id);if(isSelected){setSelectedMachines(selectedMachines.filter(m=>m.id!==machine.id));}else{setSelectedMachines([...selectedMachines,{...machine,type}]);}};const handleSubmit=async e=>{e.preventDefault();if(!selectedDistributor){toast.error('Please select a distributor');return;}if(selectedMachines.length===0){toast.error('Please select at least one machine');return;}try{setSubmitting(true);const orderData={providerId,distributorId:selectedDistributor,retailerId:selectedRetailer||null,machines:selectedMachines.map(machine=>({machineId:machine.id,type:machine.type,serialNumber:machine.serialNumber})),deliveryAddress,expectedDeliveryDate,notes:orderNotes,status:'PENDING'};await ordersAPI.create(orderData);toast.success('Order placed successfully!');navigate('/orders');}catch(error){console.error('Error creating order:',error);toast.error('Failed to place order');}finally{setSubmitting(false);}};const getDeliveryStatusIcon=status=>{switch(status){case'PENDING':return/*#__PURE__*/_jsx(ClockIcon,{className:\"h-5 w-5 text-yellow-500\"});case'IN_PROGRESS':return/*#__PURE__*/_jsx(TruckIcon,{className:\"h-5 w-5 text-blue-500\"});case'DELIVERED':return/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-5 w-5 text-green-500\"});case'CANCELLED':return/*#__PURE__*/_jsx(XCircleIcon,{className:\"h-5 w-5 text-red-500\"});default:return/*#__PURE__*/_jsx(ClockIcon,{className:\"h-5 w-5 text-gray-400\"});}};if(loading)return/*#__PURE__*/_jsx(LoadingSpinner,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),className:\"p-2 text-gray-400 hover:text-gray-600 rounded-md\",children:/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Machine Allotment Order\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:[provider===null||provider===void 0?void 0:provider.name,\" - Place order for machine allotment\"]})]})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-gray-900 mb-4\",children:\"Customer Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-6 sm:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"distributor\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Distributor *\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"distributor\",value:selectedDistributor,onChange:e=>handleDistributorChange(e.target.value),className:\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a distributor\"}),distributors.map(distributor=>/*#__PURE__*/_jsxs(\"option\",{value:distributor.id,children:[distributor.name,\" - \",distributor.company_name]},distributor.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"retailer\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Retailer (Optional)\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"retailer\",value:selectedRetailer,onChange:e=>setSelectedRetailer(e.target.value),className:\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",disabled:!selectedDistributor,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a retailer\"}),retailers.map(retailer=>/*#__PURE__*/_jsxs(\"option\",{value:retailer.id,children:[retailer.name,\" - \",retailer.shop_name]},retailer.id))]})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-gray-900 mb-4\",children:\"Select Machines\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[availableInventory.pos.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-md font-medium text-gray-900 mb-3 flex items-center\",children:[/*#__PURE__*/_jsx(ComputerDesktopIcon,{className:\"h-5 w-5 text-blue-600 mr-2\"}),\"POS Machines (\",availableInventory.pos.length,\" available)\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3\",children:availableInventory.pos.map(machine=>/*#__PURE__*/_jsx(\"div\",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${selectedMachines.some(m=>m.id===machine.id)?'border-blue-500 bg-blue-50':'border-gray-200 hover:border-gray-300'}`,onClick:()=>handleMachineSelection(machine,'POS'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-gray-900\",children:machine.serialNumber}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[\"MID: \",machine.mid,\" | TID: \",machine.tid]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:machine.model}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:machine.manufacturer})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-2\",children:selectedMachines.some(m=>m.id===machine.id)&&/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-5 w-5 text-blue-600\"})})]})},machine.id))})]}),availableInventory.soundbox.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-md font-medium text-gray-900 mb-3 flex items-center\",children:[/*#__PURE__*/_jsx(SpeakerWaveIcon,{className:\"h-5 w-5 text-purple-600 mr-2\"}),\"Soundbox Devices (\",availableInventory.soundbox.length,\" available)\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3\",children:availableInventory.soundbox.map(machine=>/*#__PURE__*/_jsx(\"div\",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${selectedMachines.some(m=>m.id===machine.id)?'border-purple-500 bg-purple-50':'border-gray-200 hover:border-gray-300'}`,onClick:()=>handleMachineSelection(machine,'SOUNDBOX'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-gray-900\",children:machine.serialNumber}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[\"QR: \",machine.qrCode]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:machine.model}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:machine.hasStandee?'With Standee':'No Standee'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-2\",children:selectedMachines.some(m=>m.id===machine.id)&&/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-5 w-5 text-purple-600\"})})]})},machine.id))})]}),availableInventory.pos.length===0&&availableInventory.soundbox.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(ComputerDesktopIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No machines available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"All machines are currently assigned or under maintenance.\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-gray-900 mb-4\",children:\"Delivery Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-6 sm:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"deliveryAddress\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Delivery Address\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"deliveryAddress\",value:deliveryAddress,onChange:e=>setDeliveryAddress(e.target.value),rows:3,className:\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",placeholder:\"Enter delivery address...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"expectedDeliveryDate\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Expected Delivery Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"expectedDeliveryDate\",value:expectedDeliveryDate,onChange:e=>setExpectedDeliveryDate(e.target.value),className:\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"orderNotes\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Order Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"orderNotes\",value:orderNotes,onChange:e=>setOrderNotes(e.target.value),rows:3,className:\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",placeholder:\"Any additional notes for this order...\"})]})]})}),selectedMachines.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-gray-900 mb-4\",children:\"Order Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Selected Machines:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedMachines.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"POS Machines:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedMachines.filter(m=>m.type==='POS').length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Soundbox Devices:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedMachines.filter(m=>m.type==='SOUNDBOX').length})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:\"Selected Items:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:selectedMachines.map(machine=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600\",children:[machine.serialNumber,\" (\",machine.type,\")\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-900 font-medium\",children:machine.type==='POS'?`${machine.mid}/${machine.tid}`:machine.qrCode})]},machine.id))})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>navigate(-1),className:\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:submitting||selectedMachines.length===0||!selectedDistributor,className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:submitting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(LoadingSpinner,{className:\"h-4 w-4 mr-2\"}),\"Placing Order...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"Place Order\"]})})]})]})]});};export default OrderBooking;","map":{"version":3,"names":["React","useState","useEffect","useParams","useSearchParams","useNavigate","serviceProvidersAPI","ordersAPI","LoadingSpinner","ComputerDesktopIcon","SpeakerWaveIcon","UserGroupIcon","BuildingStorefrontIcon","TruckIcon","CheckCircleIcon","XCircleIcon","ClockIcon","PlusIcon","ArrowLeftIcon","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OrderBooking","providerId","searchParams","navigate","provider","setProvider","availableInventory","setAvailableInventory","pos","soundbox","distributors","setDistributors","retailers","setRetailers","loading","setLoading","submitting","setSubmitting","selectedDistributor","setSelectedDistributor","selectedRetailer","setSelectedRetailer","selectedMachines","setSelectedMachines","orderNotes","setOrderNotes","deliveryAddress","setDeliveryAddress","expectedDeliveryDate","setExpectedDeliveryDate","preSelectedMachine","get","preSelectedType","fetchData","inventory","machine","find","m","id","providerData","inventoryData","distributorsData","Promise","all","getById","getAvailableInventory","getDistributors","error","console","fetchRetailers","distributorId","retailersData","getRetailers","handleDistributorChange","handleMachineSelection","type","isSelected","some","filter","handleSubmit","e","preventDefault","length","orderData","retailerId","machines","map","machineId","serialNumber","notes","status","create","success","getDeliveryStatusIcon","className","children","onClick","name","onSubmit","htmlFor","value","onChange","target","required","distributor","company_name","disabled","retailer","shop_name","mid","tid","model","manufacturer","qrCode","hasStandee","rows","placeholder"],"sources":["D:/Imp/Coding/abheepay-pos-management/client/src/pages/OrderBooking.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useSearchParams, useNavigate } from 'react-router-dom';\r\nimport { serviceProvidersAPI, ordersAPI } from '../services/api';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\nimport {\r\n  ComputerDesktopIcon,\r\n  SpeakerWaveIcon,\r\n  UserGroupIcon,\r\n  BuildingStorefrontIcon,\r\n  TruckIcon,\r\n  CheckCircleIcon,\r\n  XCircleIcon,\r\n  ClockIcon,\r\n  PlusIcon,\r\n  ArrowLeftIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst OrderBooking = () => {\r\n  const { providerId } = useParams();\r\n  const [searchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n  \r\n  const [provider, setProvider] = useState(null);\r\n  const [availableInventory, setAvailableInventory] = useState({ pos: [], soundbox: [] });\r\n  const [distributors, setDistributors] = useState([]);\r\n  const [retailers, setRetailers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  \r\n  // Form state\r\n  const [selectedDistributor, setSelectedDistributor] = useState('');\r\n  const [selectedRetailer, setSelectedRetailer] = useState('');\r\n  const [selectedMachines, setSelectedMachines] = useState([]);\r\n  const [orderNotes, setOrderNotes] = useState('');\r\n  const [deliveryAddress, setDeliveryAddress] = useState('');\r\n  const [expectedDeliveryDate, setExpectedDeliveryDate] = useState('');\r\n\r\n  // Pre-selected machine from URL params\r\n  const preSelectedMachine = searchParams.get('machine');\r\n  const preSelectedType = searchParams.get('type');\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [providerId]);\r\n\r\n  useEffect(() => {\r\n    if (preSelectedMachine && preSelectedType && availableInventory) {\r\n      const inventory = preSelectedType === 'pos' ? availableInventory.pos : availableInventory.soundbox;\r\n      const machine = inventory.find(m => m.id === preSelectedMachine);\r\n      if (machine) {\r\n        setSelectedMachines([machine]);\r\n      }\r\n    }\r\n  }, [preSelectedMachine, preSelectedType, availableInventory]);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const [providerData, inventoryData, distributorsData] = await Promise.all([\r\n        serviceProvidersAPI.getById(providerId),\r\n        serviceProvidersAPI.getAvailableInventory(providerId),\r\n        ordersAPI.getDistributors()\r\n      ]);\r\n\r\n      setProvider(providerData);\r\n      setAvailableInventory(inventoryData.inventory);\r\n      setDistributors(distributorsData);\r\n    } catch (error) {\r\n      console.error('Error fetching data:', error);\r\n      toast.error('Failed to load order data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchRetailers = async (distributorId) => {\r\n    try {\r\n      const retailersData = await ordersAPI.getRetailers({ distributorId });\r\n      setRetailers(retailersData);\r\n    } catch (error) {\r\n      console.error('Error fetching retailers:', error);\r\n      toast.error('Failed to load retailers');\r\n    }\r\n  };\r\n\r\n  const handleDistributorChange = (distributorId) => {\r\n    setSelectedDistributor(distributorId);\r\n    setSelectedRetailer('');\r\n    setRetailers([]);\r\n    if (distributorId) {\r\n      fetchRetailers(distributorId);\r\n    }\r\n  };\r\n\r\n  const handleMachineSelection = (machine, type) => {\r\n    const isSelected = selectedMachines.some(m => m.id === machine.id);\r\n    \r\n    if (isSelected) {\r\n      setSelectedMachines(selectedMachines.filter(m => m.id !== machine.id));\r\n    } else {\r\n      setSelectedMachines([...selectedMachines, { ...machine, type }]);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!selectedDistributor) {\r\n      toast.error('Please select a distributor');\r\n      return;\r\n    }\r\n    \r\n    if (selectedMachines.length === 0) {\r\n      toast.error('Please select at least one machine');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setSubmitting(true);\r\n      \r\n      const orderData = {\r\n        providerId,\r\n        distributorId: selectedDistributor,\r\n        retailerId: selectedRetailer || null,\r\n        machines: selectedMachines.map(machine => ({\r\n          machineId: machine.id,\r\n          type: machine.type,\r\n          serialNumber: machine.serialNumber\r\n        })),\r\n        deliveryAddress,\r\n        expectedDeliveryDate,\r\n        notes: orderNotes,\r\n        status: 'PENDING'\r\n      };\r\n\r\n      await ordersAPI.create(orderData);\r\n      \r\n      toast.success('Order placed successfully!');\r\n      navigate('/orders');\r\n    } catch (error) {\r\n      console.error('Error creating order:', error);\r\n      toast.error('Failed to place order');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const getDeliveryStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'PENDING':\r\n        return <ClockIcon className=\"h-5 w-5 text-yellow-500\" />;\r\n      case 'IN_PROGRESS':\r\n        return <TruckIcon className=\"h-5 w-5 text-blue-500\" />;\r\n      case 'DELIVERED':\r\n        return <CheckCircleIcon className=\"h-5 w-5 text-green-500\" />;\r\n      case 'CANCELLED':\r\n        return <XCircleIcon className=\"h-5 w-5 text-red-500\" />;\r\n      default:\r\n        return <ClockIcon className=\"h-5 w-5 text-gray-400\" />;\r\n    }\r\n  };\r\n\r\n  if (loading) return <LoadingSpinner />;\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <button\r\n            onClick={() => navigate(-1)}\r\n            className=\"p-2 text-gray-400 hover:text-gray-600 rounded-md\"\r\n          >\r\n            <ArrowLeftIcon className=\"h-5 w-5\" />\r\n          </button>\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">Machine Allotment Order</h1>\r\n            <p className=\"mt-1 text-sm text-gray-500\">\r\n              {provider?.name} - Place order for machine allotment\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-8\">\r\n        {/* Customer Selection */}\r\n        <div className=\"bg-white shadow rounded-lg\">\r\n          <div className=\"px-4 py-5 sm:p-6\">\r\n            <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">\r\n              Customer Information\r\n            </h3>\r\n            \r\n            <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2\">\r\n              {/* Distributor Selection */}\r\n              <div>\r\n                <label htmlFor=\"distributor\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Distributor *\r\n                </label>\r\n                <select\r\n                  id=\"distributor\"\r\n                  value={selectedDistributor}\r\n                  onChange={(e) => handleDistributorChange(e.target.value)}\r\n                  className=\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n                  required\r\n                >\r\n                  <option value=\"\">Select a distributor</option>\r\n                  {distributors.map((distributor) => (\r\n                    <option key={distributor.id} value={distributor.id}>\r\n                      {distributor.name} - {distributor.company_name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              {/* Retailer Selection */}\r\n              <div>\r\n                <label htmlFor=\"retailer\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Retailer (Optional)\r\n                </label>\r\n                <select\r\n                  id=\"retailer\"\r\n                  value={selectedRetailer}\r\n                  onChange={(e) => setSelectedRetailer(e.target.value)}\r\n                  className=\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n                  disabled={!selectedDistributor}\r\n                >\r\n                  <option value=\"\">Select a retailer</option>\r\n                  {retailers.map((retailer) => (\r\n                    <option key={retailer.id} value={retailer.id}>\r\n                      {retailer.name} - {retailer.shop_name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Machine Selection */}\r\n        <div className=\"bg-white shadow rounded-lg\">\r\n          <div className=\"px-4 py-5 sm:p-6\">\r\n            <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">\r\n              Select Machines\r\n            </h3>\r\n            \r\n            <div className=\"space-y-6\">\r\n              {/* POS Machines */}\r\n              {availableInventory.pos.length > 0 && (\r\n                <div>\r\n                  <h4 className=\"text-md font-medium text-gray-900 mb-3 flex items-center\">\r\n                    <ComputerDesktopIcon className=\"h-5 w-5 text-blue-600 mr-2\" />\r\n                    POS Machines ({availableInventory.pos.length} available)\r\n                  </h4>\r\n                  <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n                    {availableInventory.pos.map((machine) => (\r\n                      <div\r\n                        key={machine.id}\r\n                        className={`border rounded-lg p-4 cursor-pointer transition-colors ${\r\n                          selectedMachines.some(m => m.id === machine.id)\r\n                            ? 'border-blue-500 bg-blue-50'\r\n                            : 'border-gray-200 hover:border-gray-300'\r\n                        }`}\r\n                        onClick={() => handleMachineSelection(machine, 'POS')}\r\n                      >\r\n                        <div className=\"flex items-start justify-between\">\r\n                          <div className=\"flex-1\">\r\n                            <h5 className=\"text-sm font-medium text-gray-900\">{machine.serialNumber}</h5>\r\n                            <p className=\"text-xs text-gray-500 mt-1\">MID: {machine.mid} | TID: {machine.tid}</p>\r\n                            <p className=\"text-xs text-gray-500\">{machine.model}</p>\r\n                            <p className=\"text-xs text-gray-500\">{machine.manufacturer}</p>\r\n                          </div>\r\n                          <div className=\"ml-2\">\r\n                            {selectedMachines.some(m => m.id === machine.id) && (\r\n                              <CheckCircleIcon className=\"h-5 w-5 text-blue-600\" />\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Soundbox Devices */}\r\n              {availableInventory.soundbox.length > 0 && (\r\n                <div>\r\n                  <h4 className=\"text-md font-medium text-gray-900 mb-3 flex items-center\">\r\n                    <SpeakerWaveIcon className=\"h-5 w-5 text-purple-600 mr-2\" />\r\n                    Soundbox Devices ({availableInventory.soundbox.length} available)\r\n                  </h4>\r\n                  <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n                    {availableInventory.soundbox.map((machine) => (\r\n                      <div\r\n                        key={machine.id}\r\n                        className={`border rounded-lg p-4 cursor-pointer transition-colors ${\r\n                          selectedMachines.some(m => m.id === machine.id)\r\n                            ? 'border-purple-500 bg-purple-50'\r\n                            : 'border-gray-200 hover:border-gray-300'\r\n                        }`}\r\n                        onClick={() => handleMachineSelection(machine, 'SOUNDBOX')}\r\n                      >\r\n                        <div className=\"flex items-start justify-between\">\r\n                          <div className=\"flex-1\">\r\n                            <h5 className=\"text-sm font-medium text-gray-900\">{machine.serialNumber}</h5>\r\n                            <p className=\"text-xs text-gray-500 mt-1\">QR: {machine.qrCode}</p>\r\n                            <p className=\"text-xs text-gray-500\">{machine.model}</p>\r\n                            <p className=\"text-xs text-gray-500\">\r\n                              {machine.hasStandee ? 'With Standee' : 'No Standee'}\r\n                            </p>\r\n                          </div>\r\n                          <div className=\"ml-2\">\r\n                            {selectedMachines.some(m => m.id === machine.id) && (\r\n                              <CheckCircleIcon className=\"h-5 w-5 text-purple-600\" />\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {availableInventory.pos.length === 0 && availableInventory.soundbox.length === 0 && (\r\n                <div className=\"text-center py-12\">\r\n                  <ComputerDesktopIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n                  <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No machines available</h3>\r\n                  <p className=\"mt-1 text-sm text-gray-500\">\r\n                    All machines are currently assigned or under maintenance.\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Delivery Information */}\r\n        <div className=\"bg-white shadow rounded-lg\">\r\n          <div className=\"px-4 py-5 sm:p-6\">\r\n            <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">\r\n              Delivery Information\r\n            </h3>\r\n            \r\n            <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2\">\r\n              <div>\r\n                <label htmlFor=\"deliveryAddress\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Delivery Address\r\n                </label>\r\n                <textarea\r\n                  id=\"deliveryAddress\"\r\n                  value={deliveryAddress}\r\n                  onChange={(e) => setDeliveryAddress(e.target.value)}\r\n                  rows={3}\r\n                  className=\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n                  placeholder=\"Enter delivery address...\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"expectedDeliveryDate\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Expected Delivery Date\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  id=\"expectedDeliveryDate\"\r\n                  value={expectedDeliveryDate}\r\n                  onChange={(e) => setExpectedDeliveryDate(e.target.value)}\r\n                  className=\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mt-6\">\r\n              <label htmlFor=\"orderNotes\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Order Notes\r\n              </label>\r\n              <textarea\r\n                id=\"orderNotes\"\r\n                value={orderNotes}\r\n                onChange={(e) => setOrderNotes(e.target.value)}\r\n                rows={3}\r\n                className=\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n                placeholder=\"Any additional notes for this order...\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Order Summary */}\r\n        {selectedMachines.length > 0 && (\r\n          <div className=\"bg-white shadow rounded-lg\">\r\n            <div className=\"px-4 py-5 sm:p-6\">\r\n              <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">\r\n                Order Summary\r\n              </h3>\r\n              \r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex justify-between text-sm\">\r\n                  <span className=\"text-gray-500\">Selected Machines:</span>\r\n                  <span className=\"font-medium\">{selectedMachines.length}</span>\r\n                </div>\r\n                \r\n                <div className=\"flex justify-between text-sm\">\r\n                  <span className=\"text-gray-500\">POS Machines:</span>\r\n                  <span className=\"font-medium\">\r\n                    {selectedMachines.filter(m => m.type === 'POS').length}\r\n                  </span>\r\n                </div>\r\n                \r\n                <div className=\"flex justify-between text-sm\">\r\n                  <span className=\"text-gray-500\">Soundbox Devices:</span>\r\n                  <span className=\"font-medium\">\r\n                    {selectedMachines.filter(m => m.type === 'SOUNDBOX').length}\r\n                  </span>\r\n                </div>\r\n                \r\n                <hr className=\"my-4\" />\r\n                \r\n                <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                  <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Selected Items:</h4>\r\n                  <div className=\"space-y-2\">\r\n                    {selectedMachines.map((machine) => (\r\n                      <div key={machine.id} className=\"flex justify-between text-sm\">\r\n                        <span className=\"text-gray-600\">\r\n                          {machine.serialNumber} ({machine.type})\r\n                        </span>\r\n                        <span className=\"text-gray-900 font-medium\">\r\n                          {machine.type === 'POS' ? `${machine.mid}/${machine.tid}` : machine.qrCode}\r\n                        </span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Submit Button */}\r\n        <div className=\"flex justify-end space-x-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => navigate(-1)}\r\n            className=\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            type=\"submit\"\r\n            disabled={submitting || selectedMachines.length === 0 || !selectedDistributor}\r\n            className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            {submitting ? (\r\n              <>\r\n                <LoadingSpinner className=\"h-4 w-4 mr-2\" />\r\n                Placing Order...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <PlusIcon className=\"h-4 w-4 mr-2\" />\r\n                Place Order\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderBooking; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}